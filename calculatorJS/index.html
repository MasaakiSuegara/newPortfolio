<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../common/reset.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"><!-- NotoSansJapaneseとNotoSerifJapaneseのgooglefonts使用 -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Noto+Serif+JP:wght@200..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css">
    <title>電卓_ポートフォリオ</title>
</head>
<body>
    <main>
        <div class="version1">
            <div class="calculator">
                <input type="text" id="cWindow" class="cWindow" value="">
                <div class="cStep">
                    <button type="button" class="cButton" value="1"><span class="num">1</span></button>
                    <button type="button" class="cButton" value="2"><span class="num">2</span></button>
                    <button type="button" class="cButton" value="3"><span class="num">3</span></button>
                    <button type="button" class="cButton" value="+"><span class="ope">＋</span></button>
                </div>
                <div class="cStep">
                    <button type="button" class="cButton" value="4"><span class="num">4</span></button>
                    <button type="button" class="cButton" value="5"><span class="num">5</span></button>
                    <button type="button" class="cButton" value="6"><span class="num">6</span></button>
                    <button type="button" class="cButton" value="-"><span class="ope">ー</span></button>
                </div>
                <div class="cStep">
                    <button type="button" class="cButton" value="7"><span class="num">7</span></button>
                    <button type="button" class="cButton" value="8"><span class="num">8</span></button>
                    <button type="button" class="cButton" value="9"><span class="num">9</span></button>
                    <button type="button" class="cButton" value="*"><span class="ope">X</span></button>
                </div>
                <div class="cStep">
                    <button type="button" class="cButton" value="0"><span class="num">0</span></button>
                    <button type="button" class="cButton" value="c"><span class="ope">C</span></button>
                    <button type="button" class="cButton" value="="><span class="ope">=</span></button>
                    <button type="button" class="cButton" value="/"><span class="ope">÷</span></button>
                </div>
            </div>
            <div class="calcFlow">
                <p>被乗数(左の数値)</p>
                <input type="text" id="firstNumber" class="firstNumber clear" value="">
                <p>演算子</p>
                <input type="text" id="secondOperator" class="secondOperator clear" value="">
                <p>乗数(右の数値)</p>
                <input type="text" id="thirdNumber" class="thirdNumber clear" value="">
                <p>計算結果</p>
                <input type="text" id="cResult" class="cResult clear" value="">
            </div>
        </div>
    </main>
    <script>
        'use strict';

//ver1 とりあえず計算機を作る
        //オンクリックボタンで計算欄に数字、演算子入れて＝で計算
        const calcElement = document.querySelectorAll('.cButton')
        const cWindow = document.getElementById('cWindow')
        const cResult = document.getElementById('cResult')
        const clear= document.querySelectorAll('.clear')
        const firstNumber = document.getElementById('firstNumber')
        const secondOperator = document.getElementById('secondOperator')
        const thirdNumber = document.getElementById('thirdNumber')
        console.log(calcElement);
        console.log(clear);
//教科書P226woを参考にする。forEachまで
//オンクリックファンクションはなにかとベンチなので応用聞くようにする
        calcElement.forEach(function(typeIn){
            typeIn.onclick = function() {//クリック時、上の計算欄にクリックされたボタンのＩＤを送る
                typeIn = this.value;
                if (typeIn === 'c') {
                    cWindow.value= 0 ;
                    cResult.value= '';
                    clear.forEach(function(log){
                        log.value='';
                    })
                    return ;
                }   else if(typeIn === '=') {
//ここに計算結果がｃResultに入るようにする必要がある。
                        cResult.value = eval(firstNumber.value + secondOperator.value + thirdNumber.value );//文字列連結で一つにまとめる。
                        cWindow.value = cResult.value ;
                        return;
                }   else if(typeIn === '+' || typeIn === '-' || typeIn === '*' || typeIn === '/' ) {
                        secondOperator.value = typeIn;
                        return;
                }   else if (secondOperator.value !== '') {
                        thirdNumber.value += typeIn;
                        return;
                }   else if(secondOperator.value === '') {
                        firstNumber.value += typeIn;
                        cWindow.value += typeIn;
                }   else if(firstNumber.value !== '' && secondOperator.value !=='') {
                        thirdNumber.value += typeIn;
                }

            }
        });
        //メモリーをつけられるか
//とりあえず電卓を作ることはできた。しかし、evalのエラーが取り除けない。
//かつcatchとやらは教科書外。なので次は、欄を三つに分けて、エラーを発生させないようにしてみる。
    </script>

</body>
</html>